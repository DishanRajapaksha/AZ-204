#### Create
```
az storage account create \
        --resource-group <rg> \
        --kind StorageV2 \
        --sku Standard_LRS \
        --access-tier Cool \
        --name <name> \
        --access-tier Hot
```

```
az storage account keys list --account-name myAccount --resource-group myGroup --output table
```

```
az storage container create \
  --name myContainer \
  --account-name myAccount \
  --account-key <storage account key>
```

```
az storage blob upload \
  --container-name myContainer \
  --name myBlob\
  --file blobdata.dat
  --if-unmodified-since 2019-05-26T10:30Z
```

```
az storage blob upload-batch \
  --destination myContainer \
  --source myFolder \
  --pattern *.bmp
```

```
az storage blob list \
  --container-name myContainer \
  --output table
```

```
az storage blob copy start \
  --destination-container destContainer \
  --destination-blob myBlob \
  --source-account-name mySourceAccount \
  --source-account-key mySourceAccountKey \
  --source-container myContainer \
  --source-blob myBlob
```

```
az storage blob copy start-batch \
  --destination-container destContainer \
  --source-account-name mySourceAccount \
  --source-account-key mySourceAccountKey \
  --source-container myContainer \
  --pattern *.dat
```

```
az storage blob delete \
  --container sourceContainer \
  --name sourceBlob
```

### Moving files
#### Create a CloudBlobClient reference for each account
#### Create a reference for each container
#### Create a reference for each blob item
#### Use destination blob item to do the copy operation
#### Delete the source blob item

```
//Get a cloud client for the source Storage Account             
CloudBlobClient sourceClient = Common.CreateBlobClientStorageFromSAS(appSettings.SourceSASToken, appSettings.SourceAccountName);             

//Get a reference for each container             
var sourceContainerReference = sourceClient.GetContainerReference(appSettings.SourceContainerName);             
var destinationContainerReference = sourceClient.GetContainerReference(appSettings.DestinationContainerName);             

//Get a reference for the source blob             
var sourceBlobReference = sourceContainerReference.GetBlockBlobReference(sourceBlobFileName);             
var destinationBlobReference = destinationContainerReference.GetBlockBlobReference(sourceBlobFileName);             

//Move the blob from the source container to the destination container
await destinationBlobReference.StartCopyingAsync(sourceBlobReference);

await sourceBlobReference.DeleteAsync();
```

```
//You need to fetch the container properties before getting their values             
container.FetchAttributes();

//Add some metadata to the container that we created before             
container.Metadata.Add("department", "Technical");
```

### Leasing
```
//Get the lease status of the source blob             
await sourceBlobReference.FetchAttributesAsync();             

System.Console.WriteLine($"Lease status:{sourceBlobReference.Properties.LeaseStatus

//Acquire an infinite lease. If you want to set a duration for the lease use             
//TimeSpan.FromSeconds(seconds). 
//Remember that seconds should be a value between 15 and 60.             
//We need to save the lease ID automatically generated by Azure for release the lease later.             

string leaseID = Guid.NewGuid().ToString();             

await sourceBlobReference.AcquireLeaseAsync(null, leaseID);            

await sourceBlobReference.FetchAttributesAsync();             

System.Console.WriteLine($"Lease status: {sourceBlobReference.Properties.LeaseStatus}"
```
